<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link type="text/css" href="assets/style.css">
    <title>GifTastic</title>
</head>
<body>
    <h1>GifTastic</h1>
    <div id="buttons">
          <button q="anthony hopkins">
            hello clarice
          </button>
        <button q="wes anderson">
          thats a loaded question
        </button>
        <button q="quentin tarantino">
          hot girls get revenge
        </button>
        <button q="cats">
          meow meow
        </button>
        <button q="bumble bees">
          hardest workers ever
        </button>
      </div>
      <br>
      <div id="search">
           <form id="gifs-form">
          <label for="gifs-input">Add GIFS:</label>
          <input type="text" id="gifs-input">
          <input id="add-gifs" type="submit" value="Search">
        </form>
        
      </div>
      <div id="gifs-appear-here">
      </div>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script type="text/javascript">
        var gifs=[]
        
          var q = $(this).attr("data-person");
          var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
            q + "&api_key=B2kfUvLPgmUxUB2QYTYA3NxTPO5olhEJ";
        
        $("#buttons").on("click", function(response) {
          $.ajax({
            url: queryURL,
            method: "GET"
          })
            .then(function(response) {
              //create response array

              var results = response.data;
              
              for (var i = 0; i < results.length; i++) {
                //space for gif
                var gifDiv = $("<div>");
                //chooses image out of array
                var rating = results[i].rating;
                  //step3 
                var p = $("<p>").text("Rating: " + rating);
                  //step 4
                var qImage = $("<img>");
                qImage.attr("src", results[i].images.fixed_height.url);
                  //4
                gifDiv.prepend(p);//rating
                gifDiv.prepend(qImage);
                  //4
                $("#gifs-appear-here").prepend(gifDiv);
              }
            
            });
        });
        
        function renderButton(){
          for (var x=0;x<gifs.length;x++){
            var b= $("<button>");
            b.addClass("gif-btn");
            b.attr("q",gifs[x]);
            b.text(gifs[x]);
            $("#buttons").append(b);
          }
        }
        $("#add-gifs").on('click', function(event){
          event.preventDefault();
          var gif= $("#gifs-input").val().trim();
          gifs.push(gif);
          renderButton();
        });
          
        
        $("#add-gifs #buttons").on("click",".gif-btn", displayGif());
        renderButton();
        
      </script>
</body>
</html>